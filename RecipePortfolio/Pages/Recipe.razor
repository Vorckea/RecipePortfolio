@page "/recipe/{Id}"
@using RecipePortfolio.Data
@inject HttpClient Http



@if (recipe == null)
{
    <div class="text-center">
        <div class="spinner-border text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <p>Loading recipe...</p>
    </div>
}
else
{
    <div class="recipe-detail container mt-4">
        <h1 class="text-center mb-4">@recipe.Title</h1>
        <div class="text-center mb-4">
            <img src="@recipe.Image" alt="@recipe.Title" />
        </div>
        <div class"row">
            <div class="col-md-6">
                <h2>Ingredients</h2>
                <ul class="list-group">
                    @foreach (var ingredient in recipe.Ingredients)
                    {
                        <li class="list-group-item"> @ingredient</li>
                    }
                </ul>
            </div>
            <div class="col-md-6">
                <h2>Instructions</h2>
                <ol class="list-group list-group-numbered">
                    @foreach (var instruction in recipe.Instructions)
                    {
                        <li class="list-group-item">@instruction</li>
                    }
                </ol>
            </div>
        </div>
    </div>
}


@code {
    [Parameter]
    public string Id { get; set; } = "";

    private Data.Recipe? recipe;

    protected override async Task OnParametersSetAsync()
    {
        var recipes = await Http.GetFromJsonAsync<List<Data.Recipe>>("data/recipes.json");
        recipe = recipes?.FirstOrDefault(r => r.Id == Id);
    }
}
